{config_load file=$smarty.session.lang_file}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>cpanel</title>
</head>
<link href="{$path}/datagrid.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="{$path}/datagrid.js"></script>
<link rel="stylesheet" href="{$path}/calendar/dhtmlgoodies_calendar/dhtmlgoodies_calendar.css" type="text/css" media="screen" />
<script type="text/javascript" src="{$path}/calendar/dhtmlgoodies_calendar/dhtmlgoodies_calendar.js?random=20060118"></script>
{literal}
 	<script type="text/javascript">
    $(function() {
        $('.gallery').lightBox();
    });
    </script>
    <style type="text/css">
    .coldata td{ padding:10px;}
    </style>
{/literal}
<body>
<form name="for_datagrid" action="" method="get" style="margin:0px;">
<input type="hidden" name="ajax" />
{if $object->sRootPath!=''}
<table cellspacing="0" cellpadding="0" width="100%">
	<tr>
		<td valign="middle" id="root">
			&nbsp;&nbsp;{$object->sRootPath}
		</td>
	</tr>
</table>
{/if}
<div style="width: 100%; border: 0px solid gray;">
<table width="100%" border="0" cellpadding="0" cellspacing="0"  class="div_filter">
	<tr>
		<td width="100%" >
			{if $object->aFilter}  
				<div style="float: left; width:82%;" id="filter_area">
					<table>
					<tr><td>
					<table cellpadding="" cellspacing="3" border="0">		  		
					{foreach item=row from=$object->aFilter name=filter}
						{if $smarty.foreach.filter.index % 3 == 0}							
							<tr>
						{/if}
						<td>{if $row.display!=''}&nbsp;{$row.display}:{/if}</td>
						<td>
						{if $row.type == 'date'}
						<input type="text" name="{if $row.name != ''}{$row.name}{else}{$row.field}{/if}" id="{if $row.name != ''}{$row.name}{else}{$row.field}{/if}" value="{$row.selected}" {if $row.style != ''} style="{$row.style}"{/if}/>
						<img src="{$path}/calendar/images/lich.gif" id="img_{$smarty.foreach.filter.index}" onclick="displayCalendar(document.getElementById({if $row.name != ''}'{$row.name}'{else}'{$row.field}'{/if}),'yyyy-mm-dd',this)" />
						{elseif $row.type=='text' || $row.type=='number'}
							<input type="text" name="{if $row.name != ''}{$row.name}{else}{$row.field}{/if}" value="{$row.selected}" style="{$row.style}" />
						{elseif $row.type=='group'}
						<select name="{$row.name}_group" id="{$row.name}_group" {if $row.style != ''} style="{$row.style}"{/if}>
							<option value="">--- Filter by ---</option>
							{foreach from=$row.field item=item key=field}
							<option value="{$field}" {if $field==$row.fgroup_by} selected{/if}>{$item[0]}</option>
							{/foreach}
						</select>
							<input type="text" name="{$row.name}" value="{$row.selected}" style="{$row.style}" />
						{else}
						<select name="{if $row.name != ''}{$row.name}{else}{$row.field}{/if}" id="{if $row.name != ''}{$row.name}{else}{$row.field}{/if}" {if $row.style != ''} style="{$row.style}"{/if}  onchange="document.for_datagrid.submit();" >
							{if $row.option_string == ''}
								<option value="">--- {#all#} ---</option>
								{html_options options = $row.options selected = $row.selected}							
							{else}
								{$row.option_string}
							{/if}
						</select>
						{/if}
						</td>
						{if $smarty.foreach.filter.index % 3 == 2}
							</tr>
						{elseif $smarty.foreach.filter.last == true}							
							<td>&nbsp;</td></tr>
						{/if}
				  	{/foreach}
					</table>
					</td>
					<td valign="bottom" style="padding-bottom:5px">
						<input type="submit" name="bt_fillter" value="{#bt_filter#}" style="border:1px solid gray; width:60px;"/>
						<input type="button" name="bt_reset" value="{#bt_reset#}" style="border:1px solid gray; width:60px;" onclick="resetFilter();"/>
					</td>
					</tr></table>					
			  </div>
			  {/if}
			<div style="float: right; width:120px; padding-top:5px;">{#total_item#}: <strong>{$number_record}</strong>&nbsp;&nbsp;&nbsp;</div>
		</td>
	</tr>
	{if $object->sMessage != ''}	
	<tr >
		<td class="notice_msg" style="">{$object->sMessage}</td>
	</tr>
	{/if}
</table>
<table border="0" width="100%" cellpadding="0" cellspacing="0" class="coldata">
	<tr class="tr_title">
		{if $object->aTaskAll}<td class="check td_border_left">&nbsp;</td>{/if}
		{if !$object->hideIndex}<td class="td_index">#</td>{/if}
		{foreach item=row from=$object->aField}
			{if $row.visible != 'hidden'}			
				<td class="td_border_left" style="color:#000000;text-align:center; {if $row.width}width:{$row.width}px;{/if}">
				{if $row.sortable}<img src="{$path}/images/sort_asc{if ($sort_by==$row.field) && ($sort_value=='asc')}_select{/if}.gif" onclick="sortData('{$row.field}','asc');" style="cursor:pointer"/>&nbsp;{/if}
				{$row.display}
				{if $row.sortable}&nbsp;<img src="{$path}/images/sort_desc{if $sort_by==$row.field && $sort_value=='desc'}_select{/if}.gif" onclick="sortData('{$row.field}','desc');" style="cursor:pointer"/>{/if}
				{if $row.datatype == 'order' && $arr_value!=''}
					<img src="{$path}/images/save.png" style="cursor:pointer" title="{#save_order#}" border="0" onclick="save_order('{$row.task|default:save_order}');"/>
				{/if}
				</td>
			{/if}
		{/foreach}		
		{if $object->aTask}
		<td class="td_action td_border_left" style="width:{$object->iActionWidth}px;">{if $object->aTask[0].task =='add'}
			<span onclick="redirect_url('{$object->sSubmitUrl}&task={$object->aTask[0].task}');"><img src="{$path}/images/{$object->aTask[0].icon}" border="0" style="cursor:pointer;" /></span>{else}{#act#}{/if}
		</td>
		{/if}
	</tr>
	
	{foreach name=value item=row from=$arr_value}		
	<tr class="{if $smarty.foreach.value.index % 2 ==0}tr_mau1{else}tr_mau2{/if}" onMouseOver="this.className='tr_hover'" onMouseOut="this.className='{if $smarty.foreach.value.index % 2 ==0}tr_mau1{else}tr_mau2{/if}'" >
		{if $object->aTaskAll}
		<td class="td_check {if !$smarty.foreach.value.last} td_border{else} td_border_left{/if}">
			<input type="checkbox" name="arr_check[]" id="check_{$smarty.foreach.value.index}" value="{$row[$pkey]}" />
		</td>
		{/if}
		
		{if !$object->hideIndex}<td class="td_index {if !$smarty.foreach.value.last} td_border{else} td_border_left{/if}">{$smarty.foreach.value.index+$index_start}</td>{/if}
		
		{foreach key=key item=item from=$object->aField name=col}
			{if $item.visible == '' || $item.visible != 'hidden'}				
				<td class="{if !$smarty.foreach.value.last} td_border{else} td_border_left{/if}" style="text-align:center;padding:0 3px; {if $item.style!=''}{$item.style}{/if}">
				{if $item.link != ''}<a href="{$item.link}&id={$row[$pkey]}">{/if}
				{if $item.value_cores != ''}
					{foreach key=ref item=cor from=$item.value_cores}
						{if $ref == $row[$item.field]}
							{$cor}
						{/if}					
					{/foreach}
				{else}
					{if $item.datatype=='img'}
						{if $row[$item.field] != ''}						
						<a href="{$item.img_path}{$row[$item.field]}" class="gallery">
							{$row[$item.field]|flashPhoto:$item.img_path:$row[$item.tooltip]}
						</a>
						{else}&nbsp;{/if}
					{elseif $item.datatype=='boolean'}
						{if $row[$item.field]=='1' || $row[$item.field]=='t' ||$row[$item.field]=='active' }
							<img src="{$path}/images/active.gif" border="0">
						{else}
							<img src="{$path}/images/deactive.gif" border="0">
						{/if}
					{elseif $item.datatype=='publish'}
						{if $row[$item.field]=='1' || $row[$item.field]=='t' ||$row[$item.field]=='active' }
							<img src="{$path}/images/active.gif" border="0" alt="unpublish" style="cursor:pointer" title="{#unpublish_item#}" onclick="doPublish('{$object->sSubmitUrl}&task={$item.task|default:'change_status'}&field={$item.field}&id={$row[$pkey]}&ajax', this);">
						{else}
							<img src="{$path}/images/deactive.gif" border="0" alt="publish"  style="cursor:pointer" title="{#publish_item#}" onclick="doPublish('{$object->sSubmitUrl}&task={$item.task|default:'change_status'}&field={$item.field}&id={$row[$pkey]}&ajax', this);">
						{/if}
					{elseif $item.datatype=='number'}
						{$row[$item.field]|number_format:0:",":"."}	
					{elseif $item.datatype=='date'}
						{$row[$item.field]|echo_date:"M d,Y h:i:s A"}	
					{elseif $item.datatype=='float'}
						{$row[$item.field]|number_format:3:".":","}
					{elseif $item.datatype=='order'}
						<input type="text" name="{$item.field}[{$row[$pkey]}]" value="{$row[$item.field]}"  style="width:60px; height:18px; font-size:11px"/>
					{elseif $item.datatype=='movie'}
						{if $row[$item.field]!=''}
							 <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="{$item.img_size}" height="{$item.img_size}" hspace="8" vspace="20" align="absmiddle" id="flash">
    <param name="movie" value="{$item.img_path}{$row[$item.field]}" />
    <param name="quality" value="high" />
    <param name="SCALE" value="noborder" /><param name="LOOP" value="false" /><param name="PLAY" value="false" />
    <embed src="{$item.img_path}{$row[$item.field]}" width="{$item.img_size}" height="{$item.img_size}" hspace="8" vspace="20" loop="false" align="absmiddle" quality="high" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" scale="noborder" play="true"></embed>
  </object>{else} No movie{/if}
					{else}
						{$row[$item.field]|default:'&nbsp;'}
					{/if}
				{/if}
				{if $item.link != ''}</a>{/if}	
				</td>
			{/if}
		{/foreach}
		{if  $object->aTask}
		<td class="td_action {if !$smarty.foreach.value.last} td_border{else} td_border_left{/if}" style="width:{$object->iActionWidth}px;">
		{foreach item=item from=$object->aTask}
			{if $item.task!='add'}
			{if ($item.display == '') || ($item.display.operation == 'equal' && $row[$item.display.field]==$item.display.value) || ($item.display.operation == 'notequal' && $row[$item.display.field]!=$item.display.value)}			
			<span style="cursor:pointer" onclick="
				{if $item.confirm || $item.action}javascript: 
					{if $item.action!=''} {$item.action}('{$row[$pkey]}') 
					{else}
						{if $item.field_cascade != '' && $row[$item.field_cascade] != '' && $row[$item.field_cascade] != 0} 
							confirm_redirect('{$item.confirm_cascade}', '{$object->sSubmitUrl}&task={$item.task}&id={$row[$pkey]}') 
						{else}
							 confirm_redirect('{$item.confirm}', '{$object->sSubmitUrl}&task={$item.task}&id={$row[$pkey]}') 
							 
						{/if}	
					{/if} 
				{else} javascript:redirect_url('{$object->sSubmitUrl}&task={$item.task}&id={$row[$pkey]}') {/if}" title="{$item.tooltip}">
				{if $item.icon}<img src="{$path}/images/{$item.icon}" border="0" style="cursor:pointer;" />{else}{$item.text}{/if}
			</span>
			{/if}			
			{/if}
		{/foreach}&nbsp;
		</td>
		{/if}
	</tr>	
	{foreachelse}
	<tr>
		<td style="text-align: center; color: #FF3333; padding: 15px; border-top: 1px solid gray;" colspan="{$number_cols}">
			<strong>{#no_item#}</strong>
		</td>
	</tr>	
	{/foreach}	
</table>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tr class="tr_paging">
		<td class="td_check">
		{if $object->aTaskAll && $arr_value!=''}
			<input type="checkbox" name="checkall" onclick="check_all(this)" title="{#check_title#}"/>			
		{else}
			&nbsp;
		{/if}
		</td>
		<td valign="middle">&nbsp;
		{if $object->aTaskAll&& $arr_value!=''}
			{foreach from=$object->aTaskAll item=item}
				<span style="cursor:pointer; font-size:11px; font-weight:bold;" class="out" onmouseover="this.className='over'" onmouseout="this.className = 'out'" onclick="event_check('{$item.task}','{$item.confirm|default:'Are you sure?'}');">{$item.display}</span>&nbsp;|
			{/foreach}
		{/if}
		</td>
		<td  valign="middle" align="right">
			<div style="float: right;">
				{#item_per_page#}: <input name="per_page" value="{$per_page|default:10}" style="width: 40px; text-align:center;" onKeyPress="if(event.keyCode==13) for_datagrid.submit();">&nbsp;&nbsp;
				{if $page > 1}
				<span onClick="for_datagrid.page.value=1; for_datagrid.submit();" style="cursor: pointer; padding-top:3px;">
					<img src="{$path}/images/page-first.gif" border="0"  style="cursor:pointer;"/>
				</span>
				<span onClick="for_datagrid.page.value={$page-1}; for_datagrid.submit();" style="cursor: pointer">
					<img src="{$path}/images/page-prev.gif" border="0"  style="cursor:pointer"/>
				</span>
				{else}
				<span>
					<img src="{$path}/images/page-first-disabled.gif" border="0" />
					<img src="{$path}/images/page-prev-disabled.gif" border="0" />
				</span>
				{/if}<img src="{$path}/images/grid-split.gif" border="0" />
				{#page#}: <input name="page" value="{$page|default:1}" style="width: 20px; text-align:center;" onKeyPress="if(event.keyCode==13) for_datagrid.submit();">
				{#of#} <strong>{$number_page}</strong>&nbsp;&nbsp;<img src="{$path}/images/grid-split.gif" border="0"/>
				{if $page < $number_page}
				<span onClick="for_datagrid.page.value={$page+1}; for_datagrid.submit();" style="cursor: pointer;">
					<img src="{$path}/images/page-next.gif" border="0"  style="cursor:pointer"/>
				</span>
				<span onClick="for_datagrid.page.value={$number_page}; for_datagrid.submit();" style="cursor: pointer;">
					<img src="{$path}/images/page-last.gif" border="0"  style="cursor:pointer"/>
				</span>
				{else}
				<span>
					<img src="{$path}/images/page-next-disabled.gif" border="0" />
					<img src="{$path}/images/page-last-disabled.gif" border="0" />
				</span>
				{/if}&nbsp;
			</div>
		</td>
	</tr>
</table>
</div>

<input type="hidden" name="mod" value="{$smarty.get.mod}">
<input type="hidden" name="amod" value="{$smarty.get.amod}">
<input type="hidden" name="atask" value="{$smarty.get.atask}">
<input type="hidden" name="sort_by" value="{$sort_by}">
<input type="hidden" name="sort_value" value="{$sort_value}">
<input type="hidden" name="task" />
</form>
</body>
</html>